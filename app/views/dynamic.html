<div class="container">
  <!-- <div class="header"> -->
  <ul class="nav nav-pills pull-left" role="tablist">
    <li ng-repeat="type in types" ng-class="{active: dataType === type}">
      <a ng-href="#/{{type}}" ng-class="{active: dataType === type}">{{type}}</a>
      <!-- 
      <a ng-if="dataType !== type" ng-href="#/{{type}}">{{type}}</a>
      <a ng-if="dataType === type" ng-href="" ng-click="forceReload()" class="active">{{type}} <span class="glyphicon glyphicon-refresh"/></a>
       -->      
    </li>
    <li><a ng-href="" ng-click="forceReload()"><span class="glyphicon glyphicon-refresh"/></a></li>
  </ul>
  <!-- login -->
  <ul id="login" class="nav nav-pills pull-right">
    <!-- <li ng-show="auth.user"><span>{{auth.user.uid}} | <a href="" ng-click="auth.$logout()">Logout</a></span></li> -->
    <li ng-show="auth.user"><a ng-click="auth.$logout()">{{auth.user.uid}} | Logout</a></li>
    <!-- <li ng-hide="auth.user"><a href="" ng-click="auth.$login('github')">Login with github</a></li> -->
    <li ng-hide="auth.user"><a class="btn btn-warning" ng-click="auth.$login('github')">Login with github</a></li>

    <!-- <li><button class="btn btn-primary" ng-click="test()">TEST</button></li> -->
  </ul>
  <!-- Title -->
    <!-- <h3 class="text-muted">Admin Panel</h3>
  </div> -->
</div>





<!-- MODAL FOR SETTINGS -->
<div class="modal fade" id="settingsModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- modal header -->
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Show, hide or order the displayed properties</h4>
      </div>
      <!-- Toggle which properties to display -->
      <div class="modal-body">
        <ol class="list-group">
          <li class="list-group-item list-group-item-success" ng-repeat="key in keys.show">

            {{formattedKeys[key]}}
            <div class="btn-group btn-group-sm">
              <button class="btn btn-default btn-sm" ng-click="move(key, -1)"><span class="glyphicon glyphicon-arrow-up"></span></button>
              <button class="btn btn-default btn-sm" ng-click="move(key, +1)"><span class="glyphicon glyphicon-arrow-down"></span></button>
              <button class="btn btn-default btn-sm" ng-click="toggleKey(key)"><span class="glyphicon glyphicon-remove"></span></button>
            </div>

          </li>
        </ol>
        <ol class="list-group">
          <li class="list-group-item list-group-item-danger" ng-repeat="key in keys.hide">

            {{formattedKeys[key]}}
            <div class="btn-group btn-group-sm">
              <button class="btn btn-default btn-sm" ng-click="move(key, -1)"><span class="glyphicon glyphicon-arrow-up"></span></button>
              <button class="btn btn-default btn-sm" ng-click="move(key, +1)"><span class="glyphicon glyphicon-arrow-down"></span></button>
              <button class="btn btn-default btn-sm" ng-click="toggleKey(key)"><span class="glyphicon glyphicon-ok"></span></button>
            </div>

          </li>
        </ol>
      </div>
      <!-- modal footer -->
      <div class="modal-footer">
        <button class="btn btn-success" ng-click="keysToFirebase()" data-dismiss="modal">Save</button>
      </div>
    </div>
  </div>
</div>


<!-- Modal for deleting -->
<div class="modal fade" id="deleteModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title">Delete</h4>
      </div>
      <div class="modal-body">
        <p>Do you want to delete the following {{dataType}}s?</p>
        <ol>
          <li ng-repeat="object in selectedObjects" style="text-align:left">{{object.name}}</li>
        </ol>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
        <button type="button" class="btn btn-danger" ng-click="deleteSelected()" data-dismiss="modal">Yes</button>
      </div>
    </div>
  </div>
</div>


<!-- Login prompt -->
<div class="container add-space" ng-if="!auth.user">
  <h1 class="text-center"><span class="label label-warning">Please log in to access the database</span></h1>
</div>


<!-- ** MAIN CONTENT (search, table) ** -->
<div class="container  add-space" ng-if="auth.user">
  <div class="container">
    <!-- Search -->
    <!-- 
    <span id="simpleSearch">
      Filter: <input ng-model="searchValue" placeholder=" start typing to filter..."></input>
    </span> -->
    
    <!-- Modal triggers -->
    <button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal" ng-class="{disabled: selectedObjects.length === 0}">
      Delete <span class="glyphicon glyphicon-trash"/>
    </button>
    <button class="btn btn-info" data-toggle="modal" data-target="#settingsModal">
      Settings <span class="glyphicon glyphicon-wrench"/>
    </button>
  </div>






  <!-- ** TABLE ** -->
  <div class ="container add-space">
   <!--  <div class="panel panel-default">
      <div class="panel-heading">{{dataType}}</div> -->
      <table class="table table-bordered" id="objectTable">

        <!-- header rows-->
        <tr>
          <th><a href="" bo-click="setSortingPredicate('')">^</a></th>
          <th bindonce ng-repeat="key in data.keys.show" style="white-space:nowrap;">
            <a href="" bo-click="setSortingPredicate(key)">
              {{data.formattedKeys.show[key]}}
            </a>
          </th>
        </tr>

        <!-- data rows -->
        <tr bindonce ng-repeat="object in data.objects | orderBy:priority | filter:searchValue | orderBy:predicate:reverse"
        class="default" ng-class="{'selected': isSelected($index)}">

          <!-- cell: row selection -->
          <td ng-click="toggleSelectedRow($index, object.id)">
            <input type="checkbox"
            ng-checked="isSelected($index)">
          </td>

          <!-- data cells -->
          <td bindonce ng-repeat="key in data.keys.show" style="vertical-align:top">
            <div ng-init="entries=object[key]">
              <div ng-if="entries.length < 2" ng-init="entry=entries[0]">
                <div ng-if="!entry.ref">  {{entry.value}}  </div>
                <div ng-if="!!entry.ref">  <a href="#/{{entry.ref}}">{{entry.value}}</a>  </div>
              </div>
              <div ng-if="entries.length > 1">
                <div ng-init="!entries.expand">
                  <div ng-if="!entries.expand">
                    <div ng-init="entry=entries[0]">
                      <div ng-if="!entry.ref">  {{entry.value}}  </div>
                      <div ng-if="!!entry.ref">  <a href="#/{{entry.ref}}">{{entry.value}}</a>  </div>
                    </div>  <a href="" class="special" ng-click="entries.expand=true">{{entries.length-1}} more</a>
                  </div>
                  <div ng-if="entries.expand">
                    <div ng-repeat="entry in entries">
                      <div ng-if="!entry.ref">  {{entry.value}}  </div>
                      <div ng-if="!!entry.ref">  <a href="#/{{entry.ref}}">{{entry.value}}</a>  </div>
                    </div>  <a href="" class="special" ng-click="entries.expand=false"> less</a>
                  </div>
                </div>
              </div>
            </div>
          </td><!-- data cells-->

        </tr>
      </table>
    <!-- </div> -->
  </div>
</div>

